stages:          
  - build
  - test
  - deploy

# Close the software if it is running from a previous run of the pipeline to allow the new version to be started
docker-compose-down:
  stage: build
  script:
    docker compose down

docker-compose-build:       
  stage: build
  script:
    - docker compose build

test-job:   
  stage: test   
  script:
    - cd tests
    - npm install
    - npm test


docker-compose-up:      
  stage: deploy 
  environment: production
  script:
    - docker compose up --detach
